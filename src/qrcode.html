<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=, initial-scale=1.0">    
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <header>         
        <img src="public/images/logo-siseven.png" alt="">  
    </header>
    <main>
        <section>
            <article>
                <span>Clique no botão abaixo para gerar o QR Code</span>
                <button onclick="mostrarQrCode()">Gerar QR Code</button>                 
                <div id="qrcode">
                    <img src="https://www.pexels.com/pt-br/foto/slack-logo-430205/" alt="">  
                </div>
            </article>
        </section>
    </main>  
    <script>        
        async function mostrarQrCode() {
            try {
                const response = await fetch('/status')
                const data = await response.json();
                const qrCode = await data.qr_code.base64Qr;
                console.log(qrCode)
                const dados = console.log(data.qr_code.base64Qr)
                const button = document.getElementsByTagName("button");
                const qrcode = document.getElementById("qrcode");
                
                qrcode.innerHTML = `<img src="${qrCode}" alt=""> 
                                    <span>Conecte o seu aparelho lendo o qr-code acima</span>`;
            } catch (error) {
                console.log("Erro ao realizar requisição HTTP: " + error)
            }  
        }
    </script>      
</body>
</html>